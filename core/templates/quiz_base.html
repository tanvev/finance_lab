
{% load static %}

{% block extra_head %}
<!-- Preload + Load Quiz Engine -->
<link rel="preload" href="{% static 'js/quiz_engine.js' %}" as="script">
<script src="{% static 'js/quiz_engine.js' %}"></script>
<!-- Each quiz page must provide: `questionBank` & `initQuiz()` call -->
{% endblock %}

{% block content %}
<section class="mb-6">
  <h1 id="page-title" class="text-2xl md:text-3xl font-semibold text-trust dark:text-blue-300">{{ page_title }}</h1>
  <p class="mt-2 text-sm md:text-base text-gray-700 dark:text-gray-300 max-w-2xl">{{ page_sub }}</p>
</section>

<!-- QUIZ CARD -->
<section id="quiz-card"
         class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-5 md:p-6 shadow-md relative overflow-hidden">

  <div class="flex items-center justify-between mb-3 text-xs md:text-sm text-gray-600 dark:text-gray-300">
    <span id="q-counter">Question 1 of 5</span>
    <span id="q-score">Score: 0 / 5</span>
  </div>

  <h2 id="q-text" class="text-base md:text-lg font-semibold text-gray-900 dark:text-gray-100"></h2>
  <p id="q-context" class="mt-1 text-xs md:text-sm text-gray-600 dark:text-gray-300"></p>

  <div id="q-options" class="mt-4 space-y-2"></div>

  <div id="q-feedback" class="mt-3 text-xs md:text-sm hidden"></div>
  <div id="q-warning" class="mt-2 text-xs text-red-600 dark:text-red-300 hidden">
    Please select an answer before moving to the next question.
  </div>

  <div class="mt-5 flex justify-between items-center text-xs md:text-sm">
    <button id="q-prev"
            class="px-3 py-1.5 rounded-md border border-gray-300 dark:border-gray-600 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 disabled:opacity-40"
            disabled>← Previous</button>

    <button id="q-next"
            class="px-4 py-1.5 rounded-md bg-blue-600 dark:bg-blue-500 text-white hover:bg-blue-700 dark:hover:bg-blue-400 transition">
      Next →
    </button>
  </div>
</section>

<!-- RESULT + BADGE -->
<section id="result-card"
         class="hidden mt-8 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6 shadow-md relative overflow-hidden">

  <div id="confetti-container" class="pointer-events-none absolute inset-0 overflow-hidden hidden"></div>

  <h2 class="text-xl md:text-2xl font-semibold text-trust dark:text-blue-200" id="result-title"></h2>
  <p id="result-score" class="mt-4 text-sm md:text-base text-gray-900 dark:text-gray-100 font-medium"></p>

  <div class="mt-5 flex flex-col md:flex-row items-center gap-4">
    <div id="badge-wrapper" class="w-32 h-40 flex items-center justify-center"></div>
    <div>
      <p id="badge-title" class="text-base md:text-lg font-semibold text-gray-900 dark:text-gray-100"></p>
      <p id="badge-desc" class="mt-1 text-sm text-gray-700 dark:text-gray-300 max-w-md"></p>
    </div>
  </div>

  <div class="mt-6 flex flex-wrap gap-3 text-xs md:text-sm">
    <a id="module-link" href="#"><button class="px-4 py-1.5 rounded-md bg-blue-600 text-white">Back</button></a>
    <button onclick="restartQuiz()" class="px-4 py-1.5 rounded-md border border-gray-300 dark:border-gray-600">
      Retake Quiz
    </button>
  </div>
</section>
{% endblock %}
